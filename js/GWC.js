"use strict";var str=JSON.parse(localStorage.getItem("str"));console.log(str);var id,str1="",_loop=function(n){$.get("http://jx.xuzhixiang.top/ap/api/detail.php?id=".concat(n),function(t){t=t.data;str1+='\n      <ul data-id="'.concat(t.pid,'" class="oul">\n           <li><input type="checkbox" class="ck"/></li>\n           <li><img src="').concat(t.pimg,'" alt="" /></li>\n           <li>').concat(t.pname,"</li>\n           <li>").concat(t.pprice,'/元</li>\n           <li>\n           <input type="button" class="minus" value="-" />\n           <input type="text" class="text" value=').concat(str[n],'>\n           <input type="button" class="plus" value="+" />\n           </li>\n           <li><span class="all">').concat(t.pprice*str[n],'</span></li>\n           <li><button class="delete">删除</button></li>\n       </ul>\n      '),$(".boxs").html(str1)}).then(function(){$("#allck").click(function(){$(".ck").prop("checked",$("#allck").prop("checked"))}),$(".ck").click(function(){$(".ck").length==$(".ck:checked").length?$("#allck").prop("checked",!0):$("#allck").prop("checked",!1)})}).then(function(){for(var e=document.querySelectorAll(".minus"),l=document.querySelectorAll(".text"),t=(document.querySelectorAll(".plus"),document.querySelectorAll(".all"),0);t<e.length;t++)!function(t){e[t].onclick=function(){console.log(l[t].value),l[t].value--,l[t].value<1&&(l[t].value=1,alert("再减就没有商品了！"))}}(t);$(".delete").click(function(){var e=this;console.log("ok"),$.get("http://jx.xuzhixiang.top/ap/api/cart-delete.php",{uid:42266,pid:JSON.parse(localStorage.getItem("str"))},function(t){console.log(t),$(e).parent().parent().parent().remove()}).then(function(){location.reload()})})}).then(function(){for(var e=document.querySelectorAll(".text"),t=document.querySelectorAll(".plus"),l=0;l<t.length;l++)t[l].onclick=function(){var t;console.log("ok"),e[l].value++,(t=localStorage.getItem("str")?JSON.parse(localStorage.getItem("str")):{})[n]?t[n]++:t[n]=1,localStorage.setItem("str",JSON.stringify(t))}}).then(function(){var e=JSON.parse(localStorage.getItem("str"));$(".delete").click(function(){var t=$(this).parent().parent().attr("data-id");console.log(t),delete e[t],localStorage.setItem("str",JSON.stringify(e)),$(this).parent().parent().remove()})}).then(function(){})};for(id in str)_loop(id);